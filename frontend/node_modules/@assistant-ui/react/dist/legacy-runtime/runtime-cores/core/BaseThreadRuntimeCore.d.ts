import type { AppendMessage, ThreadMessage, Unsubscribe } from "../../../types/index.js";
import { ExportedMessageRepository, MessageRepository } from "../utils/MessageRepository.js";
import { DefaultThreadComposerRuntimeCore } from "../composer/DefaultThreadComposerRuntimeCore.js";
import { AddToolResultOptions, ResumeToolCallOptions, ThreadSuggestion, SubmitFeedbackOptions, ThreadRuntimeCore, SpeechState, RuntimeCapabilities, ThreadRuntimeEventType, StartRunConfig, ResumeRunConfig } from "./ThreadRuntimeCore.js";
import { DefaultEditComposerRuntimeCore } from "../composer/DefaultEditComposerRuntimeCore.js";
import { SpeechSynthesisAdapter } from "../adapters/speech/SpeechAdapterTypes.js";
import { FeedbackAdapter } from "../adapters/feedback/FeedbackAdapter.js";
import { AttachmentAdapter } from "../adapters/attachment/index.js";
import { ModelContextProvider } from "../../../model-context/index.js";
import { ThreadMessageLike } from "../external-store/index.js";
type BaseThreadAdapters = {
    speech?: SpeechSynthesisAdapter | undefined;
    feedback?: FeedbackAdapter | undefined;
    attachments?: AttachmentAdapter | undefined;
};
export declare abstract class BaseThreadRuntimeCore implements ThreadRuntimeCore {
    private readonly _contextProvider;
    private _subscriptions;
    private _isInitialized;
    protected readonly repository: MessageRepository;
    abstract get adapters(): BaseThreadAdapters | undefined;
    abstract get isDisabled(): boolean;
    abstract get isLoading(): boolean;
    abstract get suggestions(): readonly ThreadSuggestion[];
    abstract get extras(): unknown;
    abstract get capabilities(): RuntimeCapabilities;
    abstract append(message: AppendMessage): void;
    abstract startRun(config: StartRunConfig): void;
    abstract resumeRun(config: ResumeRunConfig): void;
    abstract addToolResult(options: AddToolResultOptions): void;
    abstract resumeToolCall(options: ResumeToolCallOptions): void;
    abstract cancelRun(): void;
    abstract unstable_loadExternalState(state: any): void;
    get messages(): readonly ThreadMessage[];
    get state(): string | number | boolean | import("assistant-stream/utils").ReadonlyJSONObject | import("assistant-stream/utils").ReadonlyJSONArray | null;
    readonly composer: DefaultThreadComposerRuntimeCore;
    constructor(_contextProvider: ModelContextProvider);
    getModelContext(): import("../../..").ModelContext;
    private _editComposers;
    getEditComposer(messageId: string): DefaultEditComposerRuntimeCore | undefined;
    beginEdit(messageId: string): void;
    getMessageById(messageId: string): {
        parentId: string | null;
        message: ThreadMessage;
        index: number;
    } | undefined;
    getBranches(messageId: string): string[];
    switchToBranch(branchId: string): void;
    protected _notifySubscribers(): void;
    _notifyEventSubscribers(event: ThreadRuntimeEventType): void;
    subscribe(callback: () => void): Unsubscribe;
    submitFeedback({ messageId, type }: SubmitFeedbackOptions): void;
    private _stopSpeaking;
    speech: SpeechState | undefined;
    speak(messageId: string): void;
    stopSpeaking(): void;
    protected ensureInitialized(): void;
    export(): ExportedMessageRepository;
    import(data: ExportedMessageRepository): void;
    reset(initialMessages?: readonly ThreadMessageLike[]): void;
    private _eventSubscribers;
    unstable_on(event: ThreadRuntimeEventType, callback: () => void): Unsubscribe;
}
export {};
//# sourceMappingURL=BaseThreadRuntimeCore.d.ts.map